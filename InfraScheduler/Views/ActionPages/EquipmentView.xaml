<UserControl x:Class="InfraScheduler.Views.EquipmentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:InfraScheduler.Views"
             xmlns:viewmodels="clr-namespace:InfraScheduler.ViewModels;assembly=InfraScheduler"
             mc:Ignorable="d" 
             d:DesignHeight="800" d:DesignWidth="1200"
             FontFamily="Segoe UI">
    
    <UserControl.Resources>
        <!-- Equipment-specific styles -->
        <Style x:Key="FormLabelStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource PrimaryFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimaryColor}"/>
            <Setter Property="Margin" Value="0,8,0,4"/>
        </Style>

        <Style x:Key="FormInputStyle" TargetType="Control">
            <Setter Property="Margin" Value="0,4,0,12"/>
            <Setter Property="Height" Value="36"/>
        </Style>
    </UserControl.Resources>
    
    <Grid Background="#FAFAFA">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Windows 10 Header with Navigation Path -->
        <Border Grid.Row="0" Background="White" BorderBrush="#E0E0E0" BorderThickness="0,0,0,1" Padding="24,16,24,16">
            <StackPanel>
                <!-- Navigation Breadcrumb -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                    <TextBlock Text="Home" Foreground="#0078D4" FontSize="14" FontWeight="Normal"/>
                    <TextBlock Text=" > " Foreground="#666666" FontSize="14" Margin="8,0,8,0"/>
                    <TextBlock Text="Inventory" Foreground="#666666" FontSize="14" Margin="0,0,8,0"/>
                    <TextBlock Text=" > " Foreground="#666666" FontSize="14" Margin="0,0,8,0"/>
                    <TextBlock Text="Equipment" Foreground="#666666" FontSize="14" FontWeight="Normal"/>
                </StackPanel>
                
                <!-- Main Heading -->
                <TextBlock Text="Equipment Management" FontSize="32" FontWeight="Light" Foreground="#333333"/>
                
                <!-- Subtitle -->
                <TextBlock Text="Manage equipment inventory, assignments, and maintenance" FontSize="16" Foreground="#666666" Margin="0,8,0,0"/>
            </StackPanel>
        </Border>

        <!-- Content Area -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="24">
            <StackPanel>
                <!-- Quick Actions -->
                <Border Background="White" CornerRadius="4" Padding="24" Margin="0,0,0,16">
                    <StackPanel>
                        <TextBlock Text="Quick Actions" FontSize="20" FontWeight="SemiBold" Foreground="#333333" Margin="0,0,0,16"/>
                        <StackPanel Orientation="Horizontal">
                            <TextBox Width="300" 
                                     Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}"
                                     Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                     Padding="12,8" Margin="0,0,12,0" VerticalAlignment="Center"
                                     FontSize="14"/>
                            <Button Content="Search" 
                                    Command="{Binding SearchEquipmentCommand}" 
                                    Background="#0078D4" Foreground="White" 
                                    Padding="16,8" BorderThickness="0" VerticalAlignment="Center"
                                    FontSize="14"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Main Content -->
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="400"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Form Panel -->
                    <Border Grid.Column="0" Background="White" Padding="24" Margin="0,0,16,0" CornerRadius="4">
                        <TabControl>
                            <TabItem Header="Equipment Addition">
                                <StackPanel>
                                    <TextBlock Text="Equipment Details" FontSize="18" FontWeight="SemiBold" Foreground="#333333" Margin="0,0,0,16"/>
                                    <StackPanel>
                                        <TextBlock Text="Item Type:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <TextBox Text="{Binding ItemType}" 
                                                 Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                 Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Description:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <TextBox Text="{Binding Description}" 
                                                 Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                 Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Quantity:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <TextBox Text="{Binding Quantity}" 
                                                 Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                 Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Condition:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <ComboBox Text="{Binding Condition}" 
                                                  Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                  Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14">
                                            <ComboBoxItem Content="New"/>
                                            <ComboBoxItem Content="Good"/>
                                            <ComboBoxItem Content="Fair"/>
                                            <ComboBoxItem Content="Poor"/>
                                        </ComboBox>
                                        
                                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                                            <Button Content="Add Batch" 
                                                    Command="{Binding AddEquipmentCommand}" 
                                                    Background="#0078D4" Foreground="White" 
                                                    Padding="16,8" BorderThickness="0" Margin="0,0,8,0" FontSize="14"/>
                                            <Button Content="Update" 
                                                    Command="{Binding UpdateEquipmentCommand}" 
                                                    Background="White" Foreground="#0078D4" 
                                                    Padding="16,8" BorderBrush="#0078D4" BorderThickness="1" 
                                                    Margin="0,0,8,0" FontSize="14"/>
                                            <Button Content="Delete" 
                                                    Command="{Binding DeleteEquipmentCommand}" 
                                                    Background="#E81123" Foreground="White" 
                                                    Padding="16,8" BorderThickness="0" FontSize="14"/>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>
                            </TabItem>
                            
                            <TabItem Header="Equipment Assignment">
                                <StackPanel>
                                    <!-- Equipment Selection Section -->
                                    <TextBlock Text="Select Equipment" FontSize="18" FontWeight="SemiBold" Foreground="#333333" Margin="0,0,0,16"/>
                                    <StackPanel Margin="0,0,0,16">
                                        <TextBlock Text="Available Equipment:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <ComboBox ItemsSource="{Binding Equipment}"
                                                  SelectedItem="{Binding SelectedEquipment}"
                                                  DisplayMemberPath="ModelNumber"
                                                  Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                  Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Selected Equipment Details:" 
                                                   FontWeight="Medium" Margin="0,16,0,8"/>
                                        <Border Background="#FAFAFA" Padding="12" CornerRadius="4" Margin="0,0,0,12">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,4">
                                                    <TextBlock Text="Item Type: " FontWeight="Medium"/>
                                                    <TextBlock Text="{Binding SelectedEquipment.Name}" Margin="8,0,0,0"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,4">
                                                    <TextBlock Text="Model Number: " FontWeight="Medium"/>
                                                    <TextBlock Text="{Binding SelectedEquipment.ModelNumber}" Margin="8,0,0,0"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,4">
                                                    <TextBlock Text="Status: " FontWeight="Medium"/>
                                                    <TextBlock Text="{Binding SelectedEquipment.Status}" Margin="8,0,0,0"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>

                                    <!-- Assignment Section -->
                                    <TextBlock Text="Equipment Assignment" FontSize="18" FontWeight="SemiBold" Foreground="#333333" Margin="0,0,0,16"/>
                                    <StackPanel>
                                        <TextBlock Text="Technician:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <ComboBox ItemsSource="{Binding Technicians}"
                                                  SelectedValue="{Binding SelectedTechnicianId}"
                                                  SelectedValuePath="Id"
                                                  DisplayMemberPath="FullName"
                                                  Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                  Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Job:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <ComboBox ItemsSource="{Binding Jobs}"
                                                  SelectedValue="{Binding SelectedJobId}"
                                                  SelectedValuePath="Id"
                                                  DisplayMemberPath="Name"
                                                  Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                  Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Checkout Date:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <DatePicker SelectedDate="{Binding CheckoutDate}" 
                                                    Height="36" Margin="0,4,0,12"/>
                                        
                                        <TextBlock Text="Expected Return Date:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <DatePicker SelectedDate="{Binding ExpectedReturnDate}" 
                                                    Height="36" Margin="0,4,0,12"/>
                                        
                                        <StackPanel Orientation="Horizontal" Margin="0,16,0,0">
                                            <Button Content="Checkout" 
                                                    Command="{Binding CheckoutEquipmentCommand}" 
                                                    Background="#0078D4" Foreground="White" 
                                                    Padding="16,8" BorderThickness="0" Margin="0,0,8,0" FontSize="14"/>
                                            <Button Content="Return" 
                                                    Command="{Binding ReturnEquipmentCommand}" 
                                                    Background="White" Foreground="#0078D4" 
                                                    Padding="16,8" BorderBrush="#0078D4" BorderThickness="1" FontSize="14"/>
                                        </StackPanel>
                                    </StackPanel>
                                </StackPanel>
                            </TabItem>
                            
                            <TabItem Header="Equipment Maintenance">
                                <StackPanel>
                                    <!-- Equipment Selection Section -->
                                    <TextBlock Text="Select Equipment" FontSize="18" FontWeight="SemiBold" Foreground="#333333" Margin="0,0,0,16"/>
                                    <StackPanel Margin="0,0,0,16">
                                        <TextBlock Text="Available Equipment:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <ComboBox ItemsSource="{Binding Equipment}"
                                                  SelectedItem="{Binding SelectedEquipment}"
                                                  DisplayMemberPath="ModelNumber"
                                                  Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                  Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <TextBlock Text="Selected Equipment Details:" 
                                                   FontWeight="Medium" Margin="0,16,0,8"/>
                                        <Border Background="#FAFAFA" Padding="12" CornerRadius="4" Margin="0,0,0,12">
                                            <StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,4">
                                                    <TextBlock Text="Item Type: " FontWeight="Medium"/>
                                                    <TextBlock Text="{Binding SelectedEquipment.Name}" Margin="8,0,0,0"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,4">
                                                    <TextBlock Text="Model Number: " FontWeight="Medium"/>
                                                    <TextBlock Text="{Binding SelectedEquipment.ModelNumber}" Margin="8,0,0,0"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal" Margin="0,4">
                                                    <TextBlock Text="Status: " FontWeight="Medium"/>
                                                    <TextBlock Text="{Binding SelectedEquipment.Status}" Margin="8,0,0,0"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </StackPanel>

                                    <!-- Maintenance Section -->
                                    <TextBlock Text="Equipment Maintenance" FontSize="18" FontWeight="SemiBold" Foreground="#333333" Margin="0,0,0,16"/>
                                    <StackPanel>
                                        <TextBlock Text="Maintenance Date:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <DatePicker SelectedDate="{Binding MaintenanceDate}" 
                                                    Height="36" Margin="0,4,0,12"/>
                                        
                                        <TextBlock Text="Maintenance Type:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <ComboBox Text="{Binding MaintenanceType}" 
                                                  Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                  Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14">
                                            <ComboBoxItem Content="Regular"/>
                                            <ComboBoxItem Content="Repair"/>
                                            <ComboBoxItem Content="Calibration"/>
                                        </ComboBox>
                                        
                                        <TextBlock Text="Performed By:" FontSize="14" FontWeight="Medium" Foreground="#333333" Margin="0,8,0,4"/>
                                        <TextBox Text="{Binding PerformedBy}" 
                                                 Background="White" BorderBrush="#E0E0E0" BorderThickness="1" 
                                                 Padding="12,8" Height="36" Margin="0,4,0,12" FontSize="14"/>
                                        
                                        <Button Content="Add Maintenance" 
                                                Command="{Binding AddMaintenanceCommand}" 
                                                Background="#0078D4" Foreground="White" 
                                                Padding="16,8" BorderThickness="0" Margin="0,16,0,0" FontSize="14"/>
                                    </StackPanel>
                                </StackPanel>
                            </TabItem>
                        </TabControl>
                    </Border>

                    <!-- Data Grid -->
                    <Border Grid.Column="1" Background="White" Padding="24" CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <DataGrid ItemsSource="{Binding Equipment}"
                                      SelectedItem="{Binding SelectedEquipment}"
                                      Background="White" BorderBrush="#E0E0E0" BorderThickness="1"
                                      AutoGenerateColumns="False"
                                      MaxHeight="600"
                                      GridLinesVisibility="Horizontal"
                                      HeadersVisibility="Column"
                                      CanUserAddRows="False"
                                      CanUserDeleteRows="False"
                                      CanUserReorderColumns="True"
                                      CanUserResizeColumns="True"
                                      CanUserResizeRows="False"
                                      SelectionMode="Single"
                                      SelectionUnit="FullRow">
                                <DataGrid.ColumnHeaderStyle>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Background" Value="#F5F5F5"/>
                                        <Setter Property="Foreground" Value="#333333"/>
                                        <Setter Property="FontWeight" Value="SemiBold"/>
                                        <Setter Property="Padding" Value="12,8"/>
                                        <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                        <Setter Property="BorderThickness" Value="0,0,1,0"/>
                                    </Style>
                                </DataGrid.ColumnHeaderStyle>
                                <DataGrid.CellStyle>
                                    <Style TargetType="DataGridCell">
                                        <Setter Property="Padding" Value="12,8"/>
                                        <Setter Property="BorderBrush" Value="#E0E0E0"/>
                                        <Setter Property="BorderThickness" Value="0,0,1,1"/>
                                    </Style>
                                </DataGrid.CellStyle>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Item Type" Binding="{Binding Name}" Width="150"/>
                                    <DataGridTextColumn Header="Model Number" Binding="{Binding ModelNumber}" Width="120"/>
                                    <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                                    <DataGridTextColumn Header="Location" Binding="{Binding Location}" Width="120"/>
                                    <DataGridTextColumn Header="Last Updated" Binding="{Binding LastUpdated}" Width="120"/>
                                </DataGrid.Columns>
                            </DataGrid>
                        </Grid>
                    </Border>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl> 